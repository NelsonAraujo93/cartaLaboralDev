(this["webpackJsonpcarta-laboral-app"]=this["webpackJsonpcarta-laboral-app"]||[]).push([[0],{336:function(e,t,s){},337:function(e,t,s){},339:function(e,t,s){},461:function(e,t,s){},462:function(e,t,s){},463:function(e,t,s){},464:function(e,t,s){},470:function(e,t,s){},471:function(e,t,s){},472:function(e,t,s){},473:function(e,t,s){},474:function(e,t,s){},475:function(e,t,s){},476:function(e,t){},478:function(e,t){},508:function(e,t){},509:function(e,t){},618:function(e,t){},789:function(e,t,s){},790:function(e,t,s){},795:function(e,t,s){"use strict";s.r(t);var a=s(2),c=s.n(a),n=s(34),i=s.n(n),r=(s(336),s(337),s(19)),l=s(15),o=s(21),d=s(20),u=s(108),j=s(24),b=s(12),m=s.n(b),h=s(36),f=(s(339),s(11)),v=s.n(f),x={url:"http://104.248.54.46:3900/metrolinea/",ws:"ws://104.248.54.46:3900"},O=s.p+"static/media/metrolinea-logo.16f6c7f8.png",p=s(29),g=s(16),y=s.n(g),N=s(71),w=s.n(N),k=s(1),C=function(e){Object(o.a)(s,e);var t=Object(d.a)(s);function s(e){var a;return Object(r.a)(this,s),(a=t.call(this,e)).userNameRef=c.a.createRef(),a.userMailRef=c.a.createRef(),a.userIdentificationRef=c.a.createRef(),a.userTelephoneRef=c.a.createRef(),a.userUrlStampRef=c.a.createRef(),a.userContentRef=c.a.createRef(),a.payroll=c.a.createRef(),a.contractor=c.a.createRef(),a.fileChange=function(e){if("application/pdf"!==e.target.files[0].type)return y.a.fire({title:'<div class="big-square"></div><div class="little-square"></div><div class="bg-title-pop"><div class="list-label pop absolute-center"><p>El archivo adjunto debe ser formato pdf.</p></div></div>',confirmButtonText:"Seguir",allowOutsideClick:!1,showCloseButton:!0}),void(e.target.value=null);var t={stamp_url:e.target.files[0]},s=new FormData;s.append("file",t.stamp_url),a.setState({stamp:s})},a.connectSocket=function(){a.socket=Object(p.io)(a.ws)},a.setSocket=function(e){a.socket.emit("set-unchecked-news",e.data.data),a.socket.on("get-unchecked-news",(function(e){a.setState({forms:e,status:"success"})}))},a.getForms=Object(h.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get(a.url+"get-unchecked-forms").then((function(e){a.setSocket(e)}));case 2:case"end":return e.stop()}}),e)}))),a.sendForm=function(e){e.preventDefault();var t={name:a.userNameRef.current.value,email:a.userMailRef.current.value,identification:a.userIdentificationRef.current.value,telephone:a.userTelephoneRef.current.value};a.setState({user:t})},a.saveForm=function(){var e=Object(h.a)(m.a.mark((function e(t){var s,c,n,i,r,l,o,d;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),s={name:a.userNameRef.current.value,email:a.userMailRef.current.value,identification:a.userIdentificationRef.current.value,telephone:a.userTelephoneRef.current.value},a.setState({user:s}),c={content:a.userContentRef.current.value,user_id:0,stamp_id:0,request_type:a.payroll.current.checked?1:0},e.prev=4,n=w.a.isEmail(a.state.user.email)&&w.a.isLength(a.state.user.email,1,255),i=""!==a.state.user.name&&w.a.isLength(a.state.user.name,1,40),r=""!==a.state.user.telephone&&w.a.isLength(a.state.user.telephone,1,10),l=""!==a.state.user.identification&&w.a.isLength(a.state.user.identification,1,12),o=null!==a.state.stamp,d=""!==c.content&&w.a.isLength(c.content,1,1500),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(4),y.a.fire({title:'<div class="big-square"></div><div class="little-square"></div><div class="bg-title-pop"><div class="list-label pop absolute-center"><p>Formulario diligenciado correctamente. Recibir\xe1 un correo con m\xe1s informaci\xf3n sobre su petici\xf3n.</p></div></div>',confirmButtonText:"Seguir",allowOutsideClick:!1,showCloseButton:!0}),e.abrupt("return",console.log(e.t0));case 17:if(!(n&&i&&d&&r&&l&&o)){e.next=22;break}return e.next=20,v.a.post(a.url+"create-user",a.state.user).then((function(e){e?(c.user_id=e.data.data.insertId,v.a.post(a.url+"upload-stamp",a.state.stamp).then(function(){var e=Object(h.a)(m.a.mark((function e(t){var s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return s={stamp_url:t.data.data},e.next=4,v.a.post(a.url+"create-stamp",s).then(function(){var e=Object(h.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=7;break}return c.stamp_id=t.data.data.insertId,a.setState({form:c}),e.next=5,v.a.post(a.url+"create-form",a.state.form).then((function(e){e?(a.getForms(),a.socket.emit("new-form",a.state.form),a.setState({status:"succes"}),y.a.fire({title:'<div class="big-square"></div><div class="little-square"></div><div class="bg-title-pop"><div class="list-label pop absolute-center">Formulario diligenciado correctamente, recibiras un correo con m\xe1s informaci\xf3n sobre tu petici\xf3n</div></div>',confirmButtonText:"Seguir",allowOutsideClick:!1,showCloseButton:!0}).then((function(){a.mailForm.email=a.state.user.email,a.mailForm.name=a.state.user.name,a.mailForm.mailState=2,a.mailForm.id=e.data.data.insertId,v.a.post(a.url+"mail",a.mailForm).then((function(e){a.props.history.push("/")}))}))):a.setState({status:"failed"})}));case 5:e.next=8;break;case 7:a.setState({status:"failed"});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:e.next=7;break;case 6:a.setState({status:"failed"});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())):a.setState({status:"failed"})}));case 20:e.next=24;break;case 22:return y.a.fire({title:'<div class="big-square"></div><div class="little-square"></div><div class="bg-title-pop"><div class="list-label pop absolute-center"><p>Formulario mal diligenciado, todos los campos son obligatorios y deben ser ingresados de forma adecuada.</p></div></div>',confirmButtonText:"Seguir",allowOutsideClick:!1,showCloseButton:!0}),e.abrupt("return");case 24:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t){return e.apply(this,arguments)}}(),a.backToNews=function(){a.props.history.push("/")},a.selectContractOrPayroll=function(e){},a.url=x.url,a.ws=x.ws,a.socket=null,a.mailForm={},a.state={user:{name:"",email:"",identification:"",telephone:""},stamp:null,form:{content:"",stamp_id:0,user_id:0},status:null,payroll:!1,contract:!1},a}return Object(l.a)(s,[{key:"componentWillMount",value:function(){this.connectSocket()}},{key:"render",value:function(){var e=this;return Object(k.jsx)(c.a.Fragment,{children:Object(k.jsx)("div",{className:"form-content-container-main",children:Object(k.jsxs)("form",{className:"form-main",onSubmit:this.saveForm,onChange:this.sendForm,children:[Object(k.jsx)("div",{className:"form-group",children:Object(k.jsx)("div",{className:"form-logo",children:Object(k.jsx)("img",{className:"login-logo",src:O,alt:"imagen de metrolinea"})})}),Object(k.jsxs)("div",{className:"form-group",children:[Object(k.jsx)("div",{className:"form-label",htmlFor:"nombre",children:Object(k.jsx)("div",{className:"text absolute-center",children:"Nombre del solicitante"})}),Object(k.jsx)("input",{className:"form-input",type:"text",name:"nombre",ref:this.userNameRef,required:!0})]}),Object(k.jsxs)("div",{className:"form-group",children:[Object(k.jsx)("div",{className:"form-label",htmlFor:"mail",children:Object(k.jsx)("div",{className:"text absolute-center",children:"Correo"})}),Object(k.jsx)("input",{className:"form-input",type:"text",name:"mail",ref:this.userMailRef,required:!0})]}),Object(k.jsxs)("div",{className:"form-group",children:[Object(k.jsx)("div",{className:"form-label",htmlFor:"identification",children:Object(k.jsx)("div",{className:"text absolute-center",children:"Identificaci\xf3n"})}),Object(k.jsx)("input",{className:"form-input",type:"identification",name:"identification",ref:this.userIdentificationRef,required:!0})]}),Object(k.jsxs)("div",{className:"form-group",children:[Object(k.jsx)("div",{className:"form-label",htmlFor:"telephone",children:Object(k.jsx)("div",{className:"text absolute-center",children:"Tel\xe9fono"})}),Object(k.jsx)("input",{className:"form-input",type:"telephone",name:"telephone",ref:this.userTelephoneRef,required:!0})]}),Object(k.jsxs)("div",{className:"form-group form-text-area",children:[Object(k.jsx)("div",{className:"form-label",htmlFor:"content",children:Object(k.jsx)("div",{className:"text absolute-center",children:"Descripci\xf3n de la solicitud"})}),Object(k.jsx)("textarea",{className:"text-area-input",type:"text-area",name:"content",ref:this.userContentRef,required:!0})]}),Object(k.jsxs)("div",{className:"form-group",children:[Object(k.jsx)("div",{className:"form-label",htmlFor:"fiel0",children:Object(k.jsx)("div",{className:"text absolute-center",children:"Adjuntar estampilla"})}),Object(k.jsx)("input",{id:"archivo",className:"form-input-file",type:"file",name:"file0",ref:this.userUrlStampRef,onChange:this.fileChange,required:!0}),Object(k.jsx)("label",{className:"file-input",htmlFor:"archivo",children:"Examinar"}),Object(k.jsx)("div",{className:"form-label",children:Object(k.jsxs)("div",{className:"text link absolute-center",children:["Recuerda descargar tu estampilla primero ",Object(k.jsx)("a",{href:"https://estampillas.syc.com.co/",target:"_blank",children:"Comprar estampilla"})]})})]}),Object(k.jsxs)("div",{className:"form-group-radio",children:[Object(k.jsx)("div",{className:"form-label",htmlFor:"requestType",children:Object(k.jsx)("div",{className:"text-radio-label absolute-center",children:"Tipo de petici\xf3n:"})}),Object(k.jsxs)("div",{className:"row no-gutters select-type align-items-center justify-content-center",children:[Object(k.jsx)("div",{className:"col-lg-12 radio-input",children:Object(k.jsxs)("label",{className:"container-radio",children:["Carta laboral n\xf3mina",Object(k.jsx)("input",{type:"radio",className:"form-input-check",checked:!0,name:"requestType",ref:this.payroll,onChange:function(t){t.preventDefault(),e.payroll.current.checked="on"===t.currentTarget.value}}),Object(k.jsx)("span",{className:"checkmark"})]})}),Object(k.jsx)("div",{className:"col-lg-12 radio-input",children:Object(k.jsxs)("label",{className:"container-radio",children:["Carta laboral contratista",Object(k.jsx)("input",{type:"radio",className:"form-input-check",name:"requestType",ref:this.contractor,onChange:function(t){t.preventDefault(),e.contractor.current.checked="on"===t.currentTarget.value}}),Object(k.jsx)("span",{className:"checkmark"})]})})]})]}),Object(k.jsx)("input",{type:"submit",value:"Enviar"}),Object(k.jsx)("div",{className:"back-container",children:Object(k.jsx)("div",{className:"btn-back",onClick:this.backToNews,children:Object(k.jsx)("div",{className:"btn-label absolute-center",children:"Volver"})})})]})})})}}]),s}(a.Component),S=(s(461),s(462),s(463),function(e){Object(o.a)(s,e);var t=Object(d.a)(s);function s(e){var a;return Object(r.a)(this,s),(a=t.call(this,e)).onClickCard=function(){a.props.clickCard(a.props.new)},a.url=x.url,a.state={form:a.props.new},a}return Object(l.a)(s,[{key:"render",value:function(){var e=null,t=!0;return 1===this.state.form.state?e=!0:0===this.state.form.state?e=!1:t=!1,Object(k.jsx)(c.a.Fragment,{children:Object(k.jsx)("div",{className:"item-card-container",children:Object(k.jsxs)("div",{className:"item-card",onClick:this.onClickCard,children:[Object(k.jsxs)("div",{className:"state-container",children:[e&&t&&Object(k.jsx)("div",{className:"label-mark certified"}),!e&&t&&Object(k.jsx)("div",{className:"label-mark denied"}),!t&&Object(k.jsx)("div",{className:"label-mark unchecked"})]}),Object(k.jsx)("div",{className:"item-container col-lg-auto",children:Object(k.jsx)("div",{className:"item-data absolute-center item-dark-data",children:this.state.form.name})}),Object(k.jsx)("div",{className:"item-container dark-item col-lg-auto",children:Object(k.jsx)("div",{className:"item-data absolute-center",children:this.state.form.identification})}),Object(k.jsx)("div",{className:"item-container col-lg-auto",children:this.state.form.request_type?Object(k.jsx)("div",{className:"item-data absolute-center",children:"Nomina"}):Object(k.jsx)("div",{className:"item-data absolute-center",children:"Contratista"})})]})})})}}]),s}(a.Component)),T=function(e){Object(o.a)(s,e);var t=Object(d.a)(s);function s(e){var a;return Object(r.a)(this,s),(a=t.call(this,e)).setQuantity=function(e){a.props.quantity(e.length)},a.connectSocket=function(){a.socket=Object(p.io)(a.ws)},a.setSocket=function(e){a.socket.emit("set-unchecked-news",e.data.data),a.socket.on("get-unchecked-news",(function(e){a.setState({forms:e,status:"success"}),a.setQuantity(e)}))},a.viewDetails=function(e){var t="/new-details/"+e.id;a.history.push(t)},a.getForms=function(){v.a.get(a.url+"get-unchecked-forms").then((function(e){a.setSocket(e)}))},a.url=x.url,a.history=a.props.history,a.ws=x.ws,a.socket=null,a.state={forms:{},status:null},a}return Object(l.a)(s,[{key:"componentWillMount",value:function(){this.connectSocket(),this.getForms()}},{key:"render",value:function(){var e=this;if(this.state.forms.length>=1){var t=this.state.forms.map((function(t,s){return Object(k.jsx)(S,{new:t,clickCard:e.viewDetails},s)}));return Object(k.jsx)(c.a.Fragment,{children:Object(k.jsx)("div",{className:"formulario absolute-center",children:t})})}return 0===this.state.forms.length&&"success"===this.state.status?Object(k.jsx)(c.a.Fragment,{children:Object(k.jsx)("div",{className:"formulario absolute-center",children:Object(k.jsx)("h1",{className:"absolute-center",children:" no hay formularios pendientes"})})}):Object(k.jsx)(c.a.Fragment,{children:Object(k.jsx)("div",{className:"formulario absolute-center",children:Object(k.jsx)("h1",{className:"absolute-center",children:" no hay Formularios"})})})}}]),s}(a.Component),F=s(52),D=(s(464),function(e){Object(o.a)(s,e);var t=Object(d.a)(s);function s(e){var a;return Object(r.a)(this,s),(a=t.call(this,e)).setQuantity=function(e){var t=[],s=[];e.map((function(e){1===e.state?t.push(e):s.push(e)}));var c={aproved:t,denied:s};a.props.quantity(c)},a.connectSocket=function(){a.socket=Object(p.io)(a.ws)},a.setSocket=function(e){a.socket.emit("set-checked-news",e.data.data),a.socket.on("get-checked-news",(function(e){a.setState({forms:e,status:"success"}),a.setQuantity(e)}))},a.viewDetails=function(e){var t="/new-details/"+e.id;a.history.push(t)},a.getCheckedForms=Object(h.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get(a.url+"get-checked-forms").then((function(e){a.setSocket(e)}));case 2:case"end":return e.stop()}}),e)}))),a.url=x.url,a.ws=x.ws,a.socket=null,a.history=a.props.history,a.viewDetails=a.viewDetails.bind(Object(F.a)(a)),a.state={forms:{},status:null},a}return Object(l.a)(s,[{key:"componentWillMount",value:function(){this.connectSocket(),this.getCheckedForms()}},{key:"render",value:function(){var e=this;if(this.state.forms.length>=1){var t=this.state.forms.map((function(t,s){return Object(k.jsx)(S,{new:t,clickCard:e.viewDetails},s)}));return Object(k.jsx)(c.a.Fragment,{children:Object(k.jsx)("div",{className:"formulario absolute-center",children:t})})}return 0===this.state.forms.length&&this.state.status,Object(k.jsx)(c.a.Fragment,{children:Object(k.jsx)("div",{className:"formulario absolute-center",children:Object(k.jsx)("h1",{className:"absolute-center",children:" no hay Formularios"})})})}}]),s}(a.Component)),R=s(178),P=(s(465),s(815)),B=function(e){Object(o.a)(s,e);var t=Object(d.a)(s);function s(e){var a;return Object(r.a)(this,s),(a=t.call(this,e)).getUser=function(e){v.a.get(a.url+"get-admin/"+e).then((function(e){a.setState({user:e.data.data})}))},a.veryfyUserSesion=function(){var e=localStorage.getItem("userSesion");v.a.get(a.url+"auth-user",{headers:{"x-acces-token":e}}).then((function(e){"Ok"!==e.data.status?y.a.fire({title:'<div class="big-square"></div><div class="little-square"></div><div class="bg-title-pop"><div class="list-label pop absolute-center"><p>Para acceder a la funcionalidad, debe iniciar sesi\xf3n.</p></div></div>',confirmButtonText:"Seguir",allowOutsideClick:!1,showCloseButton:!0}).then((function(){a.props.history.push("/login")})):(a.getUser(e.data.data.id),a.connectSocket())}),(function(e){y.a.fire({title:'<div class="big-square"></div><div class="little-square"></div><div class="bg-title-pop"><div class="list-label pop absolute-center"><p>Para acceder a la funcionalidad, debe iniciar sesi\xf3n.</p></div></div>',confirmButtonText:"Seguir",allowOutsideClick:!1,showCloseButton:!0}).then((function(){a.props.history.push("/login")}))}))},a.connectSocket=function(){a.socket=Object(p.io)(a.ws),a.socket.on("get-news",(function(e){a.setState({toast:e}),a.notify()}))},a.changeState=function(e){var t=e.currentTarget,s=document.querySelector(".btn-nav.active"),a=document.querySelector(".active.content-news"),c=document.querySelector(".inactive.content-news");"active"!==t.classList[1]&&("btn-nav-news"===t.classList[0]?(t.className="btn-nav-news active btn-nav",s.className="btn-nav-checked btn-nav"):(t.className="btn-nav-checked active btn-nav",s.className="btn-nav-news btn-nav"),a.className="content-news inactive",c.className="content-news active")},a.notify=function(){R.b.info("Nueva petici\xf3n",{position:"bottom-right",autoClose:15e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})},a.getUncheckedLength=function(e){a.setState({uncheckedLength:e})},a.getCheckedLength=function(e){a.setState({checkedDeniedLength:e.denied.length,checkedAprovedLength:e.aproved.length})},a.logOut=function(){localStorage.removeItem("userSesion"),y.a.fire({title:'<div class="big-square"></div><div class="little-square"></div><div class="bg-title-pop"><div class="list-label pop absolute-center">Sesi\xf3n cerrada</div></div>'}).then((function(){a.props.history.push("/")}))},a.url=x.url,a.ws=x.ws,a.socket=null,a.state={toast:null,uncheckedLength:"0",checkedAprovedLength:"0",checkedDeniedLength:"0",user:{}},a}return Object(l.a)(s,[{key:"componentWillMount",value:function(){this.veryfyUserSesion()}},{key:"render",value:function(){return Object(k.jsx)(c.a.Fragment,{children:Object(k.jsx)("div",{className:"row align-items-center justify-content-center news-container",children:Object(k.jsxs)("div",{className:"no-gutters content-container-news",children:[Object(k.jsxs)("div",{className:"header-menu",children:[Object(k.jsx)("div",{className:"btn-nav-news active btn-nav",onClick:this.changeState,children:Object(k.jsx)("div",{className:"btn-label absolute-center",children:"Pendientes"})}),Object(k.jsx)("div",{className:"btn-nav-checked inactive btn-nav",onClick:this.changeState,children:Object(k.jsx)("div",{className:"btn-label absolute-center",children:"Historial"})}),Object(k.jsx)("div",{className:"btn-nav-close log-out",onClick:this.logOut,children:Object(k.jsx)("div",{className:"btn-label absolute-center",children:"Cerrar sesi\xf3n"})})]}),Object(k.jsxs)("div",{className:"news-content",children:[Object(k.jsxs)("div",{className:"badge-container",children:[Object(k.jsxs)("div",{className:"badge-content",children:[Object(k.jsx)("div",{className:"badge-label absolute-center",children:"Pendientes:"}),Object(k.jsx)(P.a,{className:"unchecked",color:"primary",badgeContent:this.state.uncheckedLength})]}),Object(k.jsxs)("div",{className:"badge-content",children:[Object(k.jsx)("div",{className:"badge-label absolute-center",children:"Certificadas:"}),Object(k.jsx)(P.a,{className:"aproved",badgeContent:this.state.checkedAprovedLength})]}),Object(k.jsxs)("div",{className:"badge-content",children:[Object(k.jsx)("div",{className:"badge-label absolute-center",children:"Rechazadas:"}),Object(k.jsx)(P.a,{className:"denied",color:"secondary",badgeContent:this.state.checkedDeniedLength})]})]}),Object(k.jsx)("div",{className:"unchecked-forms active content-news",children:Object(k.jsx)(T,{forms:this.state.forms,status:this.state.status,history:this.props.history,quantity:this.getUncheckedLength})}),Object(k.jsx)("div",{className:"checked-forms inactive content-news",children:Object(k.jsx)(D,{forms:this.state.checkedForms,status:this.state.statusChecked,history:this.props.history,quantity:this.getCheckedLength})})]}),Object(k.jsx)("div",{className:"toast-container",children:Object(k.jsx)(R.a,{position:"bottom-right",autoClose:15e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})})]})})})}}]),s}(a.Component),I=(s(470),s(22)),V=(s(471),s(472),s(112)),q=s(132),E=function(e){Object(o.a)(s,e);var t=Object(d.a)(s);function s(e){var a;return Object(r.a)(this,s),(a=t.call(this,e)).contractNumberRef=c.a.createRef(),a.contractYearRef=c.a.createRef(),a.setContractNumber=function(){},a.setInactive=function(){var e=document.querySelectorAll(".item-list");e.length>=1&&Array.from(e).map((function(e,t){e.className=a.state.active}))},a.selectContract=function(e,t){a.setInactive(),t.details="";var s=e.currentTarget;s.className=s.className+" active",a.setState({selectedContracts:t})},a.validateRelation=function(){},a.addContract=function(){},a.removeContract=function(e){var t=a.state.contratos;t.push(e),a.setState({contratos:t})},a.overLayRef=c.a.createRef(),a.url=x.url,a.relatedContracts=a.props.contractsRelated,a.state={contratos:[],selectedContracts:null,userId:null,active:"item-list row no-gutters align-items-center justify-content-center",showDetail:!1},a}return Object(l.a)(s,[{key:"componentWillMount",value:function(){this.setState({contratos:this.relatedContracts})}},{key:"showObject",value:function(e,t){this.setState({showDetail:!0})}},{key:"render",value:function(){var e=this,t=function(e){return Object(k.jsxs)(q.a,{transition:!1,id:"popover-basic",children:[Object(k.jsx)(q.a.Title,{as:"h3",children:"Objeto del contrato"}),Object(k.jsx)(q.a.Content,{children:e.object})]})};return Object(k.jsx)(c.a.Fragment,{children:Object(k.jsx)("div",{className:"container-search-contract",children:Object(k.jsx)("div",{className:"search-row row h-100 no-gutters",children:Object(k.jsxs)("div",{className:"col-lg-12 h-100",children:[Object(k.jsx)("div",{className:"row h-80 no-gutters",children:this.state.contratos.length>0?Object(k.jsxs)("div",{className:"list-container-search",children:[Object(k.jsx)("div",{className:"list-label",children:"Resultado de b\xfasqueda"}),Object(k.jsxs)("div",{className:"item-list-header row no-gutters align-items-center justify-content-center",children:[Object(k.jsx)("div",{className:"column-container col-lg-1",children:Object(k.jsx)("div",{className:"column-data absolute-center",children:"N\xb0"})}),Object(k.jsx)("div",{className:"column-container col-lg-3",children:Object(k.jsx)("div",{className:"column-data absolute-center",children:"A\xf1o"})}),Object(k.jsx)("div",{className:"column-container col-lg-7",children:Object(k.jsx)("div",{className:"column-data  absolute-center",children:"Objeto"})})]}),Object(k.jsx)("div",{className:"list",children:this.state.contratos.map((function(s,a){return Object(k.jsxs)("div",{className:e.state.active,onClick:function(t){e.selectContract(t,s)},children:[Object(k.jsx)("div",{className:"column-container col-lg-1",children:Object(k.jsx)("div",{className:"column-data absolute-center",children:s.contract_number})}),Object(k.jsx)("div",{className:"column-container col-lg-3",children:Object(k.jsx)("div",{className:"column-data absolute-center",children:s.year})}),Object(k.jsx)("div",{className:"column-container col-lg-7",children:Object(k.jsx)("div",{onMouseOver:function(t){e.showObject(t,s.object)},children:Object(k.jsx)(V.a,{transition:!1,ref:e.overLayRef,placement:"right",overlay:t(s),children:Object(k.jsx)("div",{variant:"success",className:"column-data elipsis absolute-center",children:s.object})})})})]},a)}))})]}):Object(k.jsxs)("div",{className:"list-container-search",children:[Object(k.jsx)("div",{className:"list-label",children:"Resultado de b\xfasqueda"}),Object(k.jsx)("div",{className:"list",children:Object(k.jsx)("h2",{className:"absolute-center",children:"No hay resultados"})})]})}),Object(k.jsx)("div",{className:"row h-10 align-items-center justify-content-center no-gutters",children:Object(k.jsx)("div",{className:"item-container col-lg-auto",children:Object(k.jsx)("div",{className:null===this.state.selectedContracts?"btn-add-contract inactive":"btn-add-contract",onClick:function(){if(null!==e.state.selectedContracts){var t="";y.a.fire({title:'<div class="big-square"></div><div class="little-square"></div><div class="bg-title-pop"><div class="list-label pop absolute-center">Por favor elija el tipo de contrato.</div></div>',denyButtonColor:"#0A9B91",confirmButtonText:"Ejecuta",denyButtonText:"Suscribi\xf3",allowOutsideClick:!1,showDenyButton:!0,showCloseButton:!0}).then((function(s){if(s.isConfirmed)t="Ejecuta",(a=e.state.contratos).map((function(t,s){t.id===e.state.selectedContracts.id&&(a.splice(s,1),e.setState({contratos:a}))})),e.props.add(e.state.selectedContracts,t),e.setState({selectedContracts:null},e.setInactive());else if(s.isDenied){var a;t="Suscribio",(a=e.state.contratos).map((function(t,s){t.id===e.state.selectedContracts.id&&(a.splice(s,1),e.setState({contratos:a}))})),e.props.add(e.state.selectedContracts,t),e.setState({selectedContracts:null},e.setInactive())}}))}else y.a.fire({title:'<div class="big-square"></div><div class="little-square"></div><div class="bg-title-pop"><div class="list-label pop absolute-center"><p>Por favor seleccione un contrato de la lista.</p></div></div>',confirmButtonText:"Seguir",allowOutsideClick:!1,showCloseButton:!0})},children:Object(k.jsx)("div",{className:"btn-label absolute-center",children:"Agregar contrato"})})})})]})})})})}}]),s}(a.Component),A=s(91),L=s(323),_=s(113),M=function(e){Object(o.a)(s,e);var t=Object(d.a)(s);function s(e){var a;return Object(r.a)(this,s),(a=t.call(this,e)).contractNumberRef=c.a.createRef(),a.contractYearRef=c.a.createRef(),a.setContractNumber=function(){},a.closeAddContract=function(){a.setState({addContract:!1})},a.addContract=function(e,t){var s={ejecuta:a.contratosEjecuta,suscribio:a.contratosSuscritos};"Suscribio"===t?(a.contratosSuscritos.push(e),a.setState({contratos:s})):(a.contratosEjecuta.push(e),a.setState({contratos:s}))},a.removeContract=function(e,t){var s=a.state.contratos;0===t?(s.ejecuta.map((function(t,c){t.id===e.id&&(s.ejecuta.splice(c,1),a.setState({contratos:s}))})),a.props.remove(e)):(s.suscribio.map((function(t,c){t.id===e.id&&(s.suscribio.splice(c,1),a.setState({contratos:s}))})),a.props.remove(e))},a.addDetail=function(e,t,s){var c=a.state.contratos;s?c.suscribio.map((function(s,n){s.id===e.id&&(s.details=t,a.setState({contratos:c}))})):c.ejecuta.map((function(s,n){s.id===e.id&&(s.details=t,a.setState({contratos:c}))}))},a.getDetail=function(e,t){var s=a.state.contratos;t?s.suscribio.map((function(t,s){t.id===e.id&&y.a.fire({title:'<div class="big-square"></div><div class="little-square"></div><div class="bg-title-lit"><div class="list-label pop absolute-center">Agregar detalle</div></div><textarea id=input-detail  type="text-area" name="detail">'+t.details+"</textarea>",denyButtonColor:"#0A9B91",confirmButtonText:"Listo",allowOutsideClick:!1,showCloseButton:!0}).then((function(e){if(e.isConfirmed){var s=document.getElementById("input-detail").value;a.addDetail(t,s,1)}}))})):s.ejecuta.map((function(t,s){t.id===e.id&&y.a.fire({title:'<div class="big-square"></div><div class="little-square"></div><div class="bg-title-lit"><div class="list-label pop absolute-center">Agregar detalle</div></div><textarea id=input-detail  type="text-area" name="detail">'+t.details+"</textarea>",denyButtonColor:"#0A9B91",confirmButtonText:"Listo",allowOutsideClick:!1,showCloseButton:!0}).then((function(e){if(e.isConfirmed){var s=document.getElementById("input-detail").value;a.addDetail(t,s,0)}}))}))},a.url=x.url,a.contratosSuscritos=[],a.contratosEjecuta=[],a.state={contratos:{ejecuta:[],suscribio:[]},selectedContracts:[],userId:null,addContract:!1,diffx:0,diffy:0,draggingState:!1,styles:{left:50,top:50},stylesWindow:{},arrivalData:{},showDetail:!1},a}return Object(l.a)(s,[{key:"componentWillMount",value:function(){this.setState({arrivalData:this.props.contractData})}},{key:"showObject",value:function(e,t){this.setState({showDetail:!0})}},{key:"render",value:function(){var e=this,t=this.props.user,s=function(e){return Object(k.jsx)(L.a,{id:"button-tooltip",children:e})};return Object(k.jsx)(c.a.Fragment,{children:void 0===t||null===t?Object(k.jsx)("div",{className:"content-createPDF",children:Object(k.jsx)("div",{className:"prev-container h-10",children:Object(k.jsx)("div",{className:"btn-prev",onClick:function(){e.props.pdfPrev()},children:Object(k.jsx)("div",{className:"btn-label absolute-center",children:"ver Certificado"})})})}):Object(k.jsxs)("div",{className:"content-createPDF",children:[Object(k.jsx)("div",{className:"row h-90 no-gutters",children:Object(k.jsxs)("div",{className:"col-lg-12 h-100",children:[Object(k.jsx)("div",{className:"row h-50 no-gutters",children:this.state.contratos.ejecuta.length>0?Object(k.jsxs)("div",{className:"list-container ejecuta-list",children:[Object(k.jsx)("div",{className:"list-label",children:"Ejecuta"}),Object(k.jsx)("div",{className:"list",children:this.state.contratos.ejecuta.map((function(t,a){return Object(k.jsxs)("div",{className:"item-list-added row no-gutters align-items-center justify-content-center",children:[Object(k.jsx)("div",{className:"colum-container col-lg-1",children:Object(k.jsx)("div",{className:"column-data absolute-center",children:t.contract_number})}),Object(k.jsx)("div",{className:"colum-container col-lg-2",children:Object(k.jsx)("div",{className:"column-data absolute-center",children:t.year})}),Object(k.jsx)("div",{className:"colum-container col-lg-6",children:Object(k.jsx)("div",{className:"column-data elipsis absolute-center",children:t.object})}),Object(k.jsx)(V.a,{transition:!1,placement:"bottom",overlay:s("Agregar detalle"),children:Object(k.jsx)("div",{className:"colum-container col-lg-1",children:Object(k.jsx)("div",{variant:"success",className:"column-data absolute-center",children:Object(k.jsx)(A.a,{variant:"edit",onClick:function(){e.getDetail(t,0)},children:Object(k.jsx)(_.a,{className:"no-events absolute-center"})})})})}),Object(k.jsx)(V.a,{transition:!1,placement:"bottom",overlay:s("Remover"),children:Object(k.jsx)("div",{className:"colum-container col-lg-1",children:Object(k.jsx)("div",{variant:"success",className:"column-data absolute-center",children:Object(k.jsx)(A.a,{variant:"danger",onClick:function(){return e.removeContract(t,0)},children:Object(k.jsx)(_.b,{className:"no-events absolute-center"})})})})})]},a)}))})]}):Object(k.jsxs)("div",{className:"list-container ejecuta-list",children:[Object(k.jsx)("div",{className:"list-label",children:"Ejecuta"}),Object(k.jsx)("div",{className:"list",children:Object(k.jsx)("h2",{className:"list-label absolute-center",children:"No hay resultados"})})]})}),Object(k.jsx)("div",{className:"row h-50 no-gutters",children:this.state.contratos.suscribio.length>0?Object(k.jsxs)("div",{className:"list-container suscribio-list",children:[Object(k.jsx)("div",{className:"list-label",children:"Suscribi\xf3"}),Object(k.jsx)("div",{className:"list",children:this.state.contratos.suscribio.map((function(t,s){return Object(k.jsxs)("div",{className:"item-list-added row no-gutters align-items-center justify-content-center",children:[Object(k.jsx)("div",{className:"colum-container col-lg-1",children:Object(k.jsx)("div",{className:"column-data absolute-center",children:t.contract_number})}),Object(k.jsx)("div",{className:"colum-container col-lg-2",children:Object(k.jsx)("div",{className:"column-data absolute-center",children:t.year})}),Object(k.jsx)("div",{className:"colum-container col-lg-5",children:Object(k.jsx)("div",{className:"column-data elipsis absolute-center",children:t.object})}),Object(k.jsx)("div",{className:"colum-container col-lg-1",children:Object(k.jsx)("div",{className:"column-data absolute-center",children:Object(k.jsx)(A.a,{variant:"edit",onClick:function(){e.getDetail(t,1)},children:Object(k.jsx)(_.a,{className:"no-events absolute-center"})})})}),Object(k.jsx)("div",{className:"colum-container col-lg-1",children:Object(k.jsx)("div",{className:"column-data absolute-center",children:Object(k.jsx)(A.a,{variant:"danger",onClick:function(){return e.removeContract(t,1)},children:Object(k.jsx)(_.b,{className:"absolute-center"})})})})]},s)}))})]}):Object(k.jsxs)("div",{className:"list-container suscribio-list",children:[Object(k.jsx)("div",{className:"list-label",children:"Suscribi\xf3"}),Object(k.jsx)("div",{className:"list",children:Object(k.jsx)("h2",{className:"list-label absolute-center",children:"No hay resultados"})})]})})]})}),Object(k.jsx)("div",{className:"prev-container h-10",children:Object(k.jsx)("div",{className:"btn-prev",onClick:function(){e.props.prev(0)},children:Object(k.jsx)("div",{className:"btn-label absolute-center",children:"Previsualizar"})})})]})})}}]),s}(a.Component),z=(s(473),function(e){Object(o.a)(s,e);var t=Object(d.a)(s);function s(e){var a;return Object(r.a)(this,s),(a=t.call(this,e)).observations=c.a.createRef(),a.setContractNumber=function(){},a.closeAddContract=function(){a.setState({addContract:!1})},a.openDragWindow=function(e){a.setState({addContract:!0})},a.url=x.url,a.dragStart=a.dragStart.bind(Object(F.a)(a)),a.dragging=a.dragging.bind(Object(F.a)(a)),a.dragOver=a.dragOver.bind(Object(F.a)(a)),a.observData=a.observations,a.state={userId:null},a}return Object(l.a)(s,[{key:"dragStart",value:function(e){this.setState({diffx:e.screenX-e.currentTarget.getBoundingClientRect().left,diffy:e.screenY-e.currentTarget.getBoundingClientRect().top,draggingState:!0})}},{key:"dragOver",value:function(){this.setState({draggingState:!1})}},{key:"dragging",value:function(e){if(this.state.draggingState){var t={left:e.screenX-this.state.diffx,top:e.screenY-this.state.diffy};this.setState({styles:t}),console.log(t)}}},{key:"render",value:function(){var e=this,t=this.props.user;return Object(k.jsx)(c.a.Fragment,{children:void 0===t||null===t?Object(k.jsx)("div",{className:"content-Payroll",children:Object(k.jsx)("div",{className:"prev-container h-10",children:Object(k.jsx)("div",{className:"btn-prev",onClick:function(){e.props.pdfPrev()},children:Object(k.jsx)("div",{className:"btn-label absolute-center",children:"ver certificado"})})})}):Object(k.jsxs)("div",{className:"content-Payroll",children:[Object(k.jsx)("div",{className:"row h-90 no-gutters align-items-center",children:Object(k.jsx)("div",{className:"container-text-area col-lg-12 h-90",children:Object(k.jsx)("textarea",{className:"text-area-input",type:"text-area",name:"content",ref:this.observations})})}),Object(k.jsx)("div",{className:"prev-container h-10",children:Object(k.jsx)("div",{className:"btn-prev",onClick:function(){e.props.prev(1,e.observations)},children:Object(k.jsx)("div",{className:"btn-label absolute-center",children:"Previsualizar"})})})]})})}}]),s}(a.Component)),U=(s(474),function(e){Object(o.a)(s,e);var t=Object(d.a)(s);function s(e){var a;return Object(r.a)(this,s),(a=t.call(this,e)).connectSocket=function(){a.socket=Object(p.io)(a.ws)},a.getUser=function(e){v.a.get(a.url+"get-admin/"+e).then((function(e){a.setState({user:e.data.data})}))},a.veryfyUserSesion=function(){var e=localStorage.getItem("userSesion");v.a.get(a.url+"auth-user",{headers:{"x-acces-token":e}}).then((function(e){"Ok"!==e.data.status?y.a.fire({title:'<div class="big-square"></div><div class="little-square"></div><div class="bg-title-pop"><div class="list-label pop absolute-center"><p>Para acceder a esta funcionalidad debes iniciar sesi\xf3n</p></div></div>',confirmButtonText:"Seguir",allowOutsideClick:!1,showCloseButton:!0}).then((function(){a.props.history.push("/login")})):(a.getUser(e.data.data.id),a.connectSocket())}),(function(e){y.a.fire({title:'<div class="big-square"></div><div class="little-square"></div><div class="bg-title-pop"><div class="list-label pop absolute-center"><p>Est\xe1s ingresando como usuario externo, podr\xe1s visualizar m\xe1s no editar</p></div></div>',confirmButtonText:"Seguir",allowOutsideClick:!1,showCloseButton:!0})}))},a.getContractor=function(){v.a.get(a.url+"get-contractor/"+a.props.contractorId).then((function(e){a.setState({contractor:e.data.data},(function(){a.contractorData=a.state.contractor})),v.a.get(a.url+"get-contracts/"+a.state.contractor.id).then((function(e){a.setState({relatedContracts:e.data.data,loadedContracts:!0})}))}))},a.addContract=function(e,t){a.props.pdfData(e,t)},a.removeContract=function(e){a.passRemove.current.removeContract(e)},a.url=x.url,a.ws=x.ws,a.socket=null,a.contractorData=null,a.passRemove=c.a.createRef(),a.state={user:{name:"",pass:""},status:null,contractor:{},relatedContracts:[],loadedContracts:!1},a}return Object(l.a)(s,[{key:"componentWillMount",value:function(){this.getContractor()}},{key:"render",value:function(){var e=this.props.user;return Object(k.jsxs)(c.a.Fragment,{children:[Object(k.jsx)("div",{className:"row content-user-data no-gutters",children:Object(k.jsxs)("div",{className:"col-lg-12 h-100",children:[Object(k.jsx)("div",{className:"row h-10 align-items-center justify-content-center",children:Object(k.jsx)("div",{className:"title-label-form",children:"Informaci\xf3n del contratista"})}),Object(k.jsxs)("div",{className:"row h-25 align-items-center",children:[Object(k.jsxs)("div",{className:"item-container col-lg-12",children:[Object(k.jsx)("div",{className:"item-label",children:"Nombre"}),Object(k.jsx)("div",{className:"item-data",children:Object(k.jsx)("div",{className:"text-data absolute-center",children:this.state.contractor.name})})]}),Object(k.jsxs)("div",{className:"item-container col-lg-12",children:[Object(k.jsx)("div",{className:"item-label",children:"Correo"}),Object(k.jsx)("div",{className:"item-data",children:Object(k.jsx)("div",{className:"text-data absolute-center",children:this.state.contractor.email})})]})]}),Object(k.jsxs)("div",{className:"row h-25 align-items-center",children:[Object(k.jsxs)("div",{className:"item-container col-lg-12",children:[Object(k.jsx)("div",{className:"item-label",children:"Identificaci\xf3n"}),Object(k.jsx)("div",{className:"item-data",children:Object(k.jsx)("div",{className:"text-data absolute-center",children:this.state.contractor.identification})})]}),Object(k.jsxs)("div",{className:"item-container col-lg-12",children:[Object(k.jsx)("div",{className:"item-label",children:"Tel\xe9fono"}),Object(k.jsx)("div",{className:"item-data",children:Object(k.jsx)("div",{className:"text-data absolute-center",children:this.state.contractor.telephone})})]})]})]})}),void 0!==e&&null!==e&&Object(k.jsx)("div",{className:"row contract-list-container no-gutters",children:this.state.loadedContracts&&Object(k.jsx)(E,{ref:this.passRemove,add:this.addContract,contractsRelated:this.state.relatedContracts})})]})}}]),s}(a.Component)),W=(s(475),function(e){Object(o.a)(s,e);var t=Object(d.a)(s);function s(e){var a;return Object(r.a)(this,s),(a=t.call(this,e)).connectSocket=function(){a.socket=Object(p.io)(a.ws)},a.getUser=function(e){v.a.get(a.url+"get-admin/"+e).then((function(e){a.setState({user:e.data.data})}))},a.getPayroll=function(){v.a.get(a.url+"get-payroll/"+a.props.payrollId).then((function(e){a.setState({payroll:e.data.data}),v.a.get(a.url+"get-dependency/"+a.state.payroll.dependency).then((function(e){a.setState({dependencia:e.data.data.name})}))}))},a.url=x.url,a.ws=x.ws,a.socket=null,a.state={user:{name:"",pass:""},status:null,payroll:{},dependencia:""},a}return Object(l.a)(s,[{key:"componentWillMount",value:function(){this.getPayroll()}},{key:"render",value:function(){return Object(k.jsx)(c.a.Fragment,{children:Object(k.jsx)("div",{className:"row content-user-data no-gutters",children:Object(k.jsxs)("div",{className:"col-lg-12 h-100",children:[Object(k.jsx)("div",{className:"row h-10 align-items-center justify-content-center",children:Object(k.jsx)("div",{className:"title-label-form",children:"Informaci\xf3n n\xf3mina"})}),Object(k.jsxs)("div",{className:"row h-60 align-items-center",children:[Object(k.jsxs)("div",{className:"item-container col-lg-12",children:[Object(k.jsx)("div",{className:"item-label",children:"Nombre"}),Object(k.jsx)("div",{className:"item-data",children:Object(k.jsx)("div",{className:"text-data absolute-center",children:this.state.payroll.name})})]}),Object(k.jsxs)("div",{className:"item-container col-lg-12",children:[Object(k.jsx)("div",{className:"item-label",children:"Apellido"}),Object(k.jsx)("div",{className:"item-data",children:Object(k.jsxs)("div",{className:"text-data absolute-center",children:[this.state.payroll.first_surname," ",this.state.payroll.second_surname]})})]}),Object(k.jsxs)("div",{className:"item-container col-lg-12",children:[Object(k.jsx)("div",{className:"item-label",children:"Identificaci\xf3n"}),Object(k.jsx)("div",{className:"item-data",children:Object(k.jsx)("div",{className:"text-data absolute-center",children:this.state.payroll.identification})})]}),Object(k.jsxs)("div",{className:"item-container col-lg-12",children:[Object(k.jsx)("div",{className:"item-label",children:"Expedici\xf3n"}),Object(k.jsx)("div",{className:"item-data",children:Object(k.jsx)("div",{className:"text-data absolute-center",children:this.state.payroll.expedition_place})})]}),Object(k.jsxs)("div",{className:"item-container col-lg-12",children:[Object(k.jsx)("div",{className:"item-label",children:"Salario"}),Object(k.jsx)("div",{className:"item-data",children:Object(k.jsx)("div",{className:"text-data absolute-center",children:this.state.payroll.salary})})]}),Object(k.jsxs)("div",{className:"item-container col-lg-12",children:[Object(k.jsx)("div",{className:"item-label",children:"Dependencia"}),Object(k.jsx)("div",{className:"item-data",children:Object(k.jsx)("div",{className:"text-data absolute-center",children:this.state.dependencia})})]})]})]})})})}}]),s}(a.Component)),H=s(6),Y=s.p+"static/media/Roboto-Regular.a8d6ac03.ttf",J=s.p+"static/media/Roboto-Bold.75371f53.ttf",$=function(e){Object(o.a)(s,e);var t=Object(d.a)(s);function s(e){var a;return Object(r.a)(this,s),(a=t.call(this,e)).newStateRef=c.a.createRef(),a.dateFormat=function(e,t){var s={},c=e.getMonth(),n=e.getFullYear(),i=e.getDay(),r=e.getDate();return s.year=n,s.monthString=a.setMonth(c),s.calendarDay=r,s.dayString=a.setDay(i),s.dayCalendarString=a.decenas(r),t&&"un"===s.dayCalendarString&&(s.dayCalendarString="primero"),s},a.setMonth=function(e){var t;switch(e){case 0:t="Enero";break;case 1:t="Febrero";break;case 2:t="Marzo";break;case 3:t="Abril";break;case 4:t="Mayo";break;case 5:t="Junio";break;case 6:t="Julio";break;case 7:t="Agosto";break;case 8:t="Septiembre";break;case 9:t="Octubre";break;case 10:t="Noviembre";break;case 11:t="Diciembre"}return t},a.setDay=function(e){var t;switch(e){case 0:t="Domingo";break;case 1:t="Lunes";break;case 2:t="Martes";break;case 3:t="Mi\xe9rcoles";break;case 4:t="Jueves";break;case 5:t="Viernes";break;case 6:t="S\xe1bado"}return t},a.decenas=function(e){var t=Math.floor(e/10),s=e-10*t;switch(t){case 1:switch(s){case 0:return"diez";case 1:return"once";case 2:return"doce";case 3:return"trece";case 4:return"catorce";case 5:return"quince";default:return"dieci"+a.unidades(s)}case 2:switch(s){case 0:return"veinte";default:return"veinti"+a.unidades(s)}case 3:return a.decenasY("treinta",s);case 4:return a.decenasY("cuarenta",s);case 5:return a.decenasY("cincuenta",s);case 6:return a.decenasY("sesenta",s);case 7:return a.decenasY("setenta",s);case 8:return a.decenasY("ochenta",s);case 9:return a.decenasY("noventa",s);case 0:return a.unidades(s)}},a.decenasY=function(e,t){return t>0?e+" y "+a.unidades(t):e},a.unidades=function(e){switch(e){case 1:return"un";case 2:return"dos";case 3:return"tres";case 4:return"cuatro";case 5:return"cinco";case 6:return"seis";case 7:return"siete";case 8:return"ocho";case 9:return"nueve"}return""},a.viewPrevPDf=function(){a.setState({blobPDF:!0},(function(){v()({method:"POST",data:a.state.form,url:a.url+"download-prev-stamp",responseType:"blob"}).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),s=URL.createObjectURL(t);window.open(s,"v-pdf")})).catch((function(e){console.log(e)}))}))},a.prevBlobPDF=function(){var e=Object(h.a)(m.a.mark((function e(t,s,c){var n,i,r,l,o,d;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=a.state.pdfValues,1===t?(i=a.userData.current.state.payroll,l=new Date,a.date=new Date(i.admission_date),a.date=a.dateFormat(a.date,1),o=a.dateFormat(l,0),i.fecha=a.date,i.today=o,i.observations=null!==s.current?s.current.value:"",n.pdfName=a.state.form.id+i.name+".pdf",n.formId=a.state.form.id,r={user:i,contracts:"",data:t},n.pdfInfo=r,d={id:a.state.form.id,pdf_string:a.state.form.id+i.name+".pdf"},v.a.post(a.url+"create-pdf",a.state.pdfValues).then((function(e){v.a.put(a.url+"add-stamp",d).then((function(e){a.setState({pdfString:d.pdf_string},(function(){c.data=a.state.pdfString,v.a.post(a.url+"mail",c).then((function(e){a.updateForm(),a.backToNews()}))}))}))}))):0===t&&(i=a.contractorRef.current.contractorData,r={user:i,contracts:a.state.contratos,data:t},n.pdfInfo=r,n.pdfName=a.state.form.id+i.name+".pdf",n.formId=a.state.form.id,d={id:a.state.form.id,pdf_string:a.state.form.id+i.name+".pdf"},v.a.post(a.url+"create-pdf",a.state.pdfValues).then((function(e){v.a.put(a.url+"add-stamp",d).then((function(e){a.setState({pdfString:d.pdf_string},(function(){c.data=a.state.pdfString,v.a.post(a.url+"mail",c).then((function(e){a.updateForm(),a.backToNews()}))}))}))})));case 2:case"end":return e.stop()}}),e)})));return function(t,s,a){return e.apply(this,arguments)}}(),a.prevPdfObjectFunc=function(e){a.prevBlobPDF(a.state.form.request_type,null===a.passDataPayroll.current?"":a.passDataPayroll.current.observData,e).then((function(){}))},a.prevPDF=function(){var e=Object(h.a)(m.a.mark((function e(t,s){var c,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.setState({prevPdfState:!0}),1===t?(c=a.userData.current.state.payroll,n=new Date,a.date=new Date(c.admission_date),a.date.setDate(a.date.getDate()+1),a.date=a.dateFormat(a.date,1),r=a.dateFormat(n,0),c.fecha=a.date,c.today=r,c.observations=null!==s.current?s.current.value:"",a.setState({previewPDF:!0},(function(){var e=function(){return Object(k.jsx)(H.Document,{children:Object(k.jsxs)(H.Page,{size:"A4",style:a.styles.page,children:[Object(k.jsxs)(H.View,{fixed:!0,style:a.styles.header,children:[Object(k.jsxs)(H.View,{style:a.styles.left,children:[Object(k.jsx)(H.View,{children:Object(k.jsx)(H.Image,{style:a.styles.metrolineaImage,src:O})}),Object(k.jsx)(H.Text,{style:a.styles.text1,children:"Nit.830.507.387-3"})]}),Object(k.jsx)(H.View,{style:a.styles.rigth,children:Object(k.jsx)(H.View,{style:a.styles.fo,children:Object(k.jsx)(H.Text,{style:a.styles.text2,children:"20-23.1.1.F0"})})})]}),Object(k.jsxs)(H.View,{style:a.styles.body,children:[Object(k.jsx)(H.View,{style:a.styles.mainTitle,children:Object(k.jsx)(H.Text,{style:a.styles.title,children:"Constancia"})}),Object(k.jsx)(H.View,{style:a.styles.fullWidthText,children:Object(k.jsx)(H.Text,{style:a.styles.justifyP,children:"La suscrita Profesional Universitario I Talento Humano, de la Sociedad Metrolinea S. A. hace constar que:"})}),Object(k.jsxs)(H.View,{children:[Object(k.jsx)(H.View,{style:a.styles.fullWidthText,children:Object(k.jsxs)(H.Text,{style:a.styles.boldP,children:[c.name," ",c.first_surname," ",c.second_surname,", identificado con la c\xe9dula de ciudadan\xeda No. ",c.identification," expedida en ",c.expedition_place,", labora en esta empresa desde el d\xeda  ",c.fecha.dayCalendarString," (",c.fecha.calendarDay,") de ",c.fecha.monthString," de ",c.fecha.year,", mediante contrato a t\xe9rmino ",c.contract_name,", en el cargo de ",c.job_name,", de la Sociedad Metrolinea S. A."]})}),Object(k.jsx)(H.View,{style:a.styles.contractData,children:Object(k.jsxs)(H.View,{style:a.styles.flexRow,children:[Object(k.jsx)(H.Text,{style:a.styles.col1,children:"Salario:"}),Object(k.jsxs)(H.Text,{style:a.styles.col2,children:["$",c.salary]})]})})]}),Object(k.jsx)(H.View,{style:a.styles.fullWidthText,children:Object(k.jsxs)(H.Text,{style:a.styles.justifyP,children:["Se expide a solicitud del interesado, en la ciudad de Bucaramanga a ",c.today.dayCalendarString," (",c.today.calendarDay,") d\xeda(s) del mes de ",c.today.monthString," de ",c.today.year,". Se adhiere y anula el recibo de compra de estampilla Pro Hospitales por valor de tres mil pesos m/cte. ($3.000) y Ordenanza por valor de Trescientos pesos mcte ($300)."]})}),""!==c.observations&&Object(k.jsxs)(H.View,{children:[Object(k.jsxs)(H.View,{style:a.styles.fullWidthText,children:[Object(k.jsx)(H.Text,{style:a.styles.boldC,children:"Observaciones:"}),Object(k.jsx)(H.Text,{style:a.styles.justifyP,children:c.observations})]}),Object(k.jsx)(H.View,{style:a.styles.fullWidthText,children:Object(k.jsx)(H.Text,{style:a.styles.justifyP,children:"Cordialmente,"})})]})]}),Object(k.jsx)(H.View,{fixed:!0,style:a.styles.footer,children:Object(k.jsxs)(H.View,{style:a.styles.footerContent,children:[Object(k.jsx)(H.View,{style:a.styles.footerTextContainer,children:Object(k.jsx)(H.Text,{style:a.styles.footerText,children:"Autopista Floridablanca N\xb0 86-30, Estaci\xf3n Provenza Occidental, Barrio Diamante II"})}),Object(k.jsx)(H.View,{style:a.styles.footerTextContainer,children:Object(k.jsx)(H.Text,{style:a.styles.footerText,children:"Tel\xe9fono: 6929824 Bucaramanga."})}),Object(k.jsx)(H.View,{style:a.styles.footerTextContainer,children:Object(k.jsx)(H.Link,{src:"www.metrolinea.gov.co",style:a.styles.footerText,children:"www.metrolinea.gov.co"})})]})})]})})};i.a.render(Object(k.jsx)(H.PDFViewer,{children:Object(k.jsx)(e,{})}),document.getElementById("viewer"),Object(h.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,H.default.pdf(Object(k.jsx)(e,{}));case 2:t.sent;case 3:case"end":return t.stop()}}),t)}))))}))):0===t&&(c=a.contractorRef.current.contractorData,a.setState({previewPDF:!0},(function(){var e=function(){return Object(k.jsx)(H.Document,{children:Object(k.jsxs)(H.Page,{size:"A4",style:a.styles.page,children:[Object(k.jsxs)(H.View,{fixed:!0,style:a.styles.header,children:[Object(k.jsxs)(H.View,{style:a.styles.left,children:[Object(k.jsx)(H.View,{children:Object(k.jsx)(H.Image,{style:a.styles.metrolineaImage,src:O})}),Object(k.jsx)(H.Text,{style:a.styles.text1,children:"Nit.830.507.387-3"})]}),Object(k.jsx)(H.View,{style:a.styles.rigth,children:Object(k.jsx)(H.View,{style:a.styles.fo,children:Object(k.jsx)(H.Text,{style:a.styles.text2,children:"20-23.1.1.F0"})})})]}),Object(k.jsxs)(H.View,{style:a.styles.body,children:[Object(k.jsx)(H.View,{style:a.styles.mainTitle,children:Object(k.jsx)(H.Text,{style:a.styles.title,children:"Constancia"})}),Object(k.jsx)(H.View,{style:a.styles.fullWidthText,children:Object(k.jsx)(H.Text,{style:a.styles.justifyP,children:"La suscrita Profesional Universitario I Talento Humano, de la Sociedad Metrolinea S. A. hace constar que:"})}),a.state.contratos.ejecuta.length>=1&&Object(k.jsxs)(H.View,{children:[Object(k.jsx)(H.View,{style:a.styles.fullWidthText,children:Object(k.jsxs)(H.Text,{style:a.styles.boldP,children:[c.name,", identificado con la c\xe9dula de ciudadan\xeda No. ",c.identification," , ejecuta con Metrol\xednea S.A., el siguiente CONTRATO DE PRESTACION DE SERVICIOS PROFESIONALES:"]})}),Object(k.jsx)(H.View,{children:a.state.contratos.ejecuta.map((function(e,t){var s,c;return s=new Date(e.date),c=new Date(e.finish_date),s=s.getDate()+"-"+(s.getMonth()+1)+"-"+s.getFullYear(),c=c.getDate()+"-"+(c.getMonth()+1)+"-"+c.getFullYear(),a.state.contratos.ejecuta[t].fDate=c,a.state.contratos.ejecuta[t].bDate=s,Object(k.jsxs)(H.View,{style:a.styles.contractData,children:[Object(k.jsx)(H.View,{style:a.styles.contractTitle,children:Object(k.jsxs)(H.Text,{style:a.styles.boldC,children:[e.contract_name," No. ",e.contract_number," de ",e.year]})}),Object(k.jsxs)(H.View,{style:a.styles.fullWidthText,children:[Object(k.jsx)(H.Text,{style:a.styles.boldC,children:"OBJETO:"}),Object(k.jsx)(H.Text,{style:a.styles.boldP,children:e.object})]}),Object(k.jsxs)(H.View,{style:a.styles.flexRow,children:[Object(k.jsx)(H.Text,{style:a.styles.col1,children:"VALOR DEL CONTRATO:"}),Object(k.jsxs)(H.Text,{style:a.styles.col2,children:[e.value_string,"($",e.value,")"]})]}),Object(k.jsxs)(H.View,{style:a.styles.flexRow,children:[Object(k.jsx)(H.Text,{style:a.styles.col1,children:"PLAZO DE CONTRATO:"}),Object(k.jsx)(H.Text,{style:a.styles.col2,children:e.execution_time})]}),Object(k.jsxs)(H.View,{style:a.styles.flexRow,children:[Object(k.jsx)(H.Text,{style:a.styles.col1,children:"INTERVENTOR:"}),Object(k.jsx)(H.Text,{style:a.styles.col2,children:e.supervisor_name})]}),Object(k.jsxs)(H.View,{style:a.styles.flexRow,children:[Object(k.jsx)(H.Text,{style:a.styles.col1,children:"FECHA DE INICIO:"}),Object(k.jsx)(H.Text,{style:a.styles.col2,children:e.bDate})]}),Object(k.jsxs)(H.View,{style:a.styles.flexRow,children:[Object(k.jsx)(H.Text,{style:a.styles.col1,children:"FECHA DE TERMINACI\xd3N:"}),Object(k.jsx)(H.Text,{style:a.styles.col2,children:e.fDate})]}),""!==e.details&&Object(k.jsxs)(H.View,{style:a.styles.flexRow,children:[Object(k.jsx)(H.Text,{style:a.styles.col1,children:"DETALLES:"}),Object(k.jsx)(H.Text,{style:a.styles.col2,children:e.details})]})]})}))})]}),a.state.contratos.suscribio.length>=1&&Object(k.jsxs)(H.View,{children:[Object(k.jsx)(H.View,{style:a.styles.fullWidthText,children:Object(k.jsxs)(H.Text,{style:a.styles.boldP,children:[c.name,", identificado con la c\xe9dula de ciudadan\xeda No. ",c.identification,", suscribi\xf3 con Metrol\xednea S.A., el siguiente CONTRATO DE PRESTACION DE SERVICIOS PROFESIONALES:"]})}),a.state.contratos.suscribio.map((function(e,t){var s,c;return s=new Date(e.date),c=new Date(e.finish_date),s=s.getDate()+"-"+(s.getMonth()+1)+"-"+s.getFullYear(),c=c.getDate()+"-"+(c.getMonth()+1)+"-"+c.getFullYear(),a.state.contratos.suscribio[t].fDate=c,a.state.contratos.suscribio[t].bDate=s,Object(k.jsxs)(H.View,{style:a.styles.contractData,Key:t,children:[Object(k.jsx)(H.View,{style:a.styles.contractTitle,children:Object(k.jsxs)(H.Text,{style:a.styles.boldC,children:[e.contract_name," No. ",e.contract_number," de ",e.year]})}),Object(k.jsx)(H.View,{style:a.styles.fullWidthText,children:Object(k.jsxs)(H.Text,{style:a.styles.boldC,children:["OBJETO: ",e.object]})}),Object(k.jsxs)(H.View,{style:a.styles.flexRow,children:[Object(k.jsx)(H.Text,{style:a.styles.col1,children:"VALOR DEL CONTRATO:"}),Object(k.jsxs)(H.Text,{style:a.styles.col2,children:[e.value_string,"($",e.value,")"]})]}),Object(k.jsxs)(H.View,{style:a.styles.flexRow,children:[Object(k.jsx)(H.Text,{style:a.styles.col1,children:"PLAZO DE CONTRATO:"}),Object(k.jsx)(H.Text,{style:a.styles.col2,children:e.execution_time})]}),Object(k.jsxs)(H.View,{style:a.styles.flexRow,children:[Object(k.jsx)(H.Text,{style:a.styles.col1,children:"INTERVENTOR:"}),Object(k.jsx)(H.Text,{style:a.styles.col2,children:e.supervisor})]}),Object(k.jsxs)(H.View,{style:a.styles.flexRow,children:[Object(k.jsx)(H.Text,{style:a.styles.col1,children:"FECHA DE INICIO:"}),Object(k.jsx)(H.Text,{style:a.styles.col2,children:e.bDate})]}),Object(k.jsxs)(H.View,{style:a.styles.flexRow,children:[Object(k.jsx)(H.Text,{style:a.styles.col1,children:"FECHA DE TERMINACI\xd3N:"}),Object(k.jsx)(H.Text,{style:a.styles.col2,children:e.fDate})]}),""!==e.details&&Object(k.jsxs)(H.View,{style:a.styles.flexRow,children:[Object(k.jsx)(H.Text,{style:a.styles.col1,children:"DETALLES:"}),Object(k.jsx)(H.Text,{style:a.styles.col2,children:e.details})]})]})}))]})]}),Object(k.jsx)(H.View,{fixed:!0,style:a.styles.footer,children:Object(k.jsxs)(H.View,{style:a.styles.footerContent,children:[Object(k.jsx)(H.View,{style:a.styles.footerTextContainer,children:Object(k.jsx)(H.Text,{style:a.styles.footerText,children:"Autopista Floridablanca N\xb0 86-30, Estaci\xf3n Provenza Occidental, Barrio Diamante II"})}),Object(k.jsx)(H.View,{style:a.styles.footerTextContainer,children:Object(k.jsx)(H.Text,{style:a.styles.footerText,children:"Tel\xe9fono: 6929824 Bucaramanga."})}),Object(k.jsx)(H.View,{style:a.styles.footerTextContainer,children:Object(k.jsx)(H.Link,{src:"www.metrolinea.gov.co",style:a.styles.footerText,children:"www.metrolinea.gov.co"})})]})})]})})};i.a.render(Object(k.jsx)(H.PDFViewer,{children:Object(k.jsx)(e,{})}),document.getElementById("viewer"),Object(h.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,H.default.pdf(Object(k.jsx)(e,{}));case 2:t.sent;case 3:case"end":return t.stop()}}),t)}))))})));case 2:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}(),a.getUser=function(e){v.a.get(a.url+"get-admin/"+e).then((function(e){a.setState({user:e.data.data})}))},a.veryfyUserSesion=function(){var e=localStorage.getItem("userSesion");v.a.get(a.url+"auth-user",{headers:{"x-acces-token":e}}).then((function(e){"Ok"!==e.data.status?y.a.fire({title:'<div class="big-square"></div><div class="little-square"></div><div class="bg-title-pop"><div class="list-label pop absolute-center">Est\xe1s ingresando como usuario externo, podr\xe1s visualizar m\xe1s no editar</div></div>',confirmButtonText:"Seguir",allowOutsideClick:!1,showCloseButton:!0}).then((function(){a.props.history.push("/login")})):(a.getUser(e.data.data.id),a.connectSocket())}),(function(e){y.a.fire({title:'<div class="big-square"></div><div class="little-square"></div><div class="bg-title-pop"><div class="list-label pop absolute-center">Est\xe1s ingresando como usuario externo, podr\xe1s visualizar m\xe1s no editar</div></div>',confirmButtonText:"Seguir",allowOutsideClick:!1,showCloseButton:!0}).then((function(){}))}))},a.backToNews=function(){a.props.history.push("/news")},a.connectSocket=function(){a.socket=Object(p.io)(a.ws)},a.setCheckedSocket=function(e){a.socket.emit("set-checked-news",e.data.data)},a.setUncheckedSocket=function(e){a.socket.emit("set-unchecked-news",e.data.data)},a.setCheckedForms=Object(h.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get(a.url+"get-checked-forms").then((function(e){a.setCheckedSocket(e)}));case 2:case"end":return e.stop()}}),e)}))),a.setForms=Object(h.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get(a.url+"get-unchecked-forms").then((function(e){a.setUncheckedSocket(e)}));case 2:case"end":return e.stop()}}),e)}))),a.updateDataState=function(e){a.newStateRef=e,1===a.newStateRef?y.a.fire({title:'<div class="big-square"></div><div class="little-square"></div><div class="bg-title-pop"><div class="list-label pop absolute-center">\xbfEst\xe1s seguro?</div></div>',showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"S\xed, certificar",cancelButtonText:"Cancelar",showCloseButton:!0}).then(function(){var e=Object(h.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.isConfirmed&&(y.a.fire({title:'<div class="big-square"></div><div class="little-square"></div><div class="bg-title-pop"><div class="list-label pop absolute-center">Se ha enviado la certificaci\xf3n</div></div>',denyButtonColor:"#0A9B91",confirmButtonText:"Seguir",allowOutsideClick:!1,showCloseButton:!0}),a.mailForm.email=a.state.form.email,a.mailForm.name=a.state.form.name,a.mailForm.mailState=1,a.mailForm.data=a.state.pdfString,a.prevPdfObjectFunc(a.mailForm));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()):y.a.fire({title:'<div class="big-square"></div><div class="little-square"></div><div class="bg-title-lit"><div class="list-label pop absolute-center">Especifique el motivo del rechazo de la solicitud</div></div><textarea id=input-detail></textarea>',denyButtonColor:"#0A9B91",confirmButtonText:"Enviar rechazo",allowOutsideClick:!1,showCloseButton:!0}).then((function(e){if(e.isConfirmed){var t=document.getElementById("input-detail").value;y.a.fire({title:'<div class="big-square"></div><div class="little-square"></div><div class="bg-title-pop"><div class="list-label pop absolute-center"><p>Este proceso es irreversible, se rechazar\xe1 la petici\xf3n de forma permanente.</p></div></div>',confirmButtonText:"Rechazar",denyButtonText:"Cancelar",denyButtonColor:"#0A9B91",showDenyButton:!0,allowOutsideClick:!1,showCloseButton:!0}).then((function(e){e.isConfirmed&&(a.updateForm(t),a.mailForm.email=a.state.form.email,a.mailForm.name=a.state.form.name,a.mailForm.pdf={},a.mailForm.mailState=0,a.mailForm.denied=a.state.form.observations,v.a.post(a.url+"mail",a.mailForm).then((function(e){a.backToNews()})))}))}}))},a.updateForm=function(e){var t=a.state.form;t.state=a.newStateRef,t.checked=1,t.observations=e,t.admin_id=a.state.user.id,v.a.put(a.url+"/update-form",t).then((function(e){a.setCheckedForms(),a.setForms()}))},a.getPdf=function(){v()({method:"POST",data:a.state.form,url:a.url+"/download-stamp",responseType:"blob"}).then((function(e){var t=new Blob([e.data],{type:"application/pdf"}),s=URL.createObjectURL(t);window.open(s,"theFrame")})).catch((function(e){console.log(e)}))},a.getFormById=function(e){v.a.get(a.url+"get-form/"+e).then((function(e){a.setState({form:e.data.data[0],status:"success"})}))},a.addContract=function(e,t){a.passData.current.addContract(e,t),a.setState({contratos:a.passData.current.state.contratos})},a.removeContract=function(e,t){a.contractorRef.current.removeContract(e),a.setState({contratos:a.passData.current.state.contratos})},H.Font.register({family:"Roboto",src:Y}),H.Font.register({family:"Roboto-Bold",src:J}),a.date=null,a.passData=c.a.createRef(),a.passDataPayroll=c.a.createRef(),a.payRollRef=c.a.createRef(),a.contractorRef=c.a.createRef(),a.userData=c.a.createRef(),a.mailForm={},a.paramId=a.props.match.params.id,a.url=x.url,a.ws=x.ws,a.socket=null,a.styles=H.StyleSheet.create({page:{backgroundColor:"white",padding:"20px 25px 80px 25px",width:"100%",height:"100%",position:"relative"},section:{margin:10,padding:10,flexGrow:1},metrolineaImage:{width:"120px",height:"100px",backgroundSize:"100%"},header:{display:"flex",flexDirection:"row",height:"80px",borderBottom:"1px solid yellow",marginBottom:"10px"},body:{height:"auto",width:"100%",padding:"0 50px"},footer:{height:"100%",width:"100%",position:"absolute",top:"80px",left:"25px"},footerContent:{position:"absolute",height:"60px",width:"100%",bottom:"0",left:"0",borderTop:"1px solid yellow",paddingTop:"10px"},left:{margin:10,padding:10,flexGrow:1},rigth:{margin:10,padding:10,flexGrow:1,flexDirection:"row",justifyContent:"flex-end",alignItems:"center"},text1:{fontSize:"10px"},text2:{fontSize:"13px",fontFamily:"Roboto-Bold"},fo:{textAlign:"right",fontSize:"14px",width:"80px",height:"20px"},title:{textAlign:"center",padding:"10px 0",textTransform:"uppercase",fontFamily:"Roboto-Bold"},justifyP:{textAlign:"justify",fontSize:"14px",marginBottom:"10px"},boldP:{display:"inline-block",fontFamily:"Roboto",fontWeight:"bold",fontSize:"14px",float:"left",textAlign:"justify"},flexRow:{width:"100%",flexDirection:"row",fontSize:"14px",marginBottom:"5px",marginTop:"5px"},col1:{width:"40%",fontSize:"13px",fontFamily:"Roboto-Bold"},col2:{width:"60%",textAlign:"justify"},fullWidthText:{marginBottom:"10px",marginTop:"10px"},contractTitle:{marginTop:"10px"},footerText:{textAlign:"center",fontSize:"10px"},footerTextContainer:{height:"10px",flexGrow:"1"},contractData:{marginBottom:"10px"},boldC:{display:"inline-block",fontFamily:"Roboto-Bold",fontSize:"14px",textAlign:"justify"}}),a.state={form:{},status:null,user:null,showPdf:!1,prevPdfState:!1,previewPDF:!1,prevPdfObject:null,blobPDF:!1,pdfValues:{formId:0,pdfInfo:{},pdfName:""},pdfString:"",removedContract:{},contratos:{ejecuta:[],suscribio:[]}},a}return Object(l.a)(s,[{key:"componentWillMount",value:function(){this.getFormById(this.paramId),this.veryfyUserSesion()}},{key:"render",value:function(){var e=this,t=function(){if(null!==e.state.user)return r?Object(k.jsx)("div",{className:"row bg-title",children:Object(k.jsx)("div",{className:"absolute-center bg-title-label",children:"A\xf1adir observaciones"})}):Object(k.jsx)("div",{className:"row bg-title",children:Object(k.jsx)("div",{className:"absolute-center bg-title-label",children:"A\xf1adir contratos"})})},s=function(t){return t?Object(k.jsx)("div",{className:"btn-aprove col-lg-auto",onClick:function(){e.viewPrevPDf()},children:Object(k.jsx)("div",{className:"btn-label absolute-center",children:"Ver certificado"})}):Object(k.jsxs)("div",{className:"row reject-observations",children:[Object(k.jsx)("div",{className:"observation-title-container col-lg-12 h-20",children:Object(k.jsx)("div",{className:"absolute-center bg-title-label",children:"Motivo de rechazo"})}),Object(k.jsx)("div",{className:"observation col-lg-12 h-80",children:Object(k.jsx)("div",{className:"observation-data",children:Object(k.jsx)("div",{className:"input-text",children:e.state.form.observations})})})]})};if(null!==this.state.user){if(void 0!==this.state.form.id&&null!==this.state.form.id){var a=null,n=!0,i="item-detail-container",r=1===this.state.form.request_type;return 1===this.state.form.state?(a=!0,i="item-detail-container certified"):0===this.state.form.state?(a=!1,i="item-detail-container rejected"):n=!1,Object(k.jsx)(c.a.Fragment,{children:Object(k.jsxs)("div",{className:i,children:[Object(k.jsxs)("div",{className:"row container-top no-gutters justify-content-center",children:[Object(k.jsx)("div",{className:"item-detail col-lg-6",children:Object(k.jsxs)("div",{className:"row content-user-data no-gutters",children:[Object(k.jsxs)("div",{className:"col-lg-12 h-100 align-items-center",children:[Object(k.jsx)("div",{className:"row h-10 align-items-center  justify-content-center",children:Object(k.jsx)("div",{className:"title-label-form",children:"Informaci\xf3n del formulario"})}),Object(k.jsxs)("div",{className:"row h-40 align-items-center  justify-content-center",children:[Object(k.jsxs)("div",{className:"item-container col-lg-12",children:[Object(k.jsx)("div",{className:"item-label",children:"Nombre"}),Object(k.jsx)("div",{className:"item-data",children:Object(k.jsx)("div",{className:"input-text absolute-center",children:this.state.form.name})})]}),Object(k.jsxs)("div",{className:"item-container col-lg-12",children:[Object(k.jsx)("div",{className:"item-label",children:"Correo"}),Object(k.jsx)("div",{className:"item-data",children:Object(k.jsx)("div",{className:"input-text absolute-center",children:this.state.form.email})})]}),Object(k.jsxs)("div",{className:"item-container col-lg-12",children:[Object(k.jsx)("div",{className:"item-label",children:"Identificaci\xf3n"}),Object(k.jsx)("div",{className:"item-data",children:Object(k.jsx)("div",{className:"input-text absolute-center",children:this.state.form.identification})})]}),Object(k.jsxs)("div",{className:"item-container col-lg-12",children:[Object(k.jsx)("div",{className:"item-label",children:"Tel\xe9fono"}),Object(k.jsx)("div",{className:"item-data",children:Object(k.jsx)("div",{className:"input-text absolute-center",children:this.state.form.telephone})})]})]}),Object(k.jsxs)("div",{className:"row h-50 align-items-center  justify-content-center",children:[Object(k.jsxs)("div",{className:"item-container area col-lg-12",children:[Object(k.jsx)("div",{className:"item-label",children:"Contenido"}),Object(k.jsx)("div",{className:"item-data",children:Object(k.jsx)("div",{className:"input-text absolute-center",children:this.state.form.content})})]}),Object(k.jsxs)("div",{className:"item-container col-lg-12",children:[Object(k.jsx)("div",{className:"item-label",children:"PDF"}),Object(k.jsx)("div",{className:"btn-pdf",onClick:function(){return e.setState({showPdf:!0})},children:Object(k.jsx)("div",{className:"btn-label absolute-center",children:"Ver estampilla"})})]})]})]}),Object(k.jsxs)(I.a,{show:this.state.showPdf,onShow:this.getPdf,onHide:function(){return e.setState({showPdf:!1})},children:[Object(k.jsx)(I.a.Header,{closeButton:!0,children:Object(k.jsx)(I.a.Title,{children:"Estampilla"})}),Object(k.jsx)(I.a.Body,{children:Object(k.jsx)("div",{className:"pdf-viewer",children:Object(k.jsx)("iframe",{name:"theFrame"})})})]}),Object(k.jsxs)(I.a,{show:this.state.previewPDF,onShow:this.prevPDF,onHide:function(){return e.setState({previewPDF:!1})},children:[Object(k.jsx)(I.a.Header,{closeButton:!0,children:Object(k.jsx)(I.a.Title,{children:"Visualizador del PDF"})}),Object(k.jsx)(I.a.Body,{children:Object(k.jsx)("div",{className:"pdf-viewer",children:Object(k.jsx)("div",{id:"viewer"})})})]}),Object(k.jsxs)(I.a,{show:this.state.blobPDF,onShow:this.viewPrevPDf,onHide:function(){return e.setState({blobPDF:!1})},children:[Object(k.jsx)(I.a.Header,{closeButton:!0,children:Object(k.jsx)(I.a.Title,{children:"Visualizador del PDF"})}),Object(k.jsx)(I.a.Body,{children:Object(k.jsx)("div",{className:"pdf-viewer",children:Object(k.jsx)("iframe",{name:"v-pdf"})})})]})]})}),Object(k.jsx)("div",{className:"user-data-container col-lg-6",children:r?Object(k.jsx)(c.a.Fragment,{children:Object(k.jsx)("div",{className:"content-payroll-data",children:Object(k.jsx)(W,{payrollId:this.state.form.identification,ref:this.userData,user:this.state.user})})}):Object(k.jsx)(c.a.Fragment,{children:Object(k.jsx)("div",{className:"content-contractor-data",children:Object(k.jsx)(U,{contractorId:this.state.form.identification,pdfData:this.addContract,addedContract:this.state.addedContract,ref:this.contractorRef,user:this.state.user})})})})]}),this.state.form.checked?s(this.state.form.state):t(),Object(k.jsxs)("div",{className:"row container-bottom no-gutters justify-content-center",children:[!n&&r&&Object(k.jsx)(c.a.Fragment,{children:Object(k.jsx)("div",{className:"col-lg-12",children:Object(k.jsx)("div",{className:"content-create-pdf h-90",children:Object(k.jsx)(z,{contractData:this.state.addedContract,ref:this.passDataPayroll,prev:this.prevPDF,pdfPrev:this.viewPrevPDf,user:this.state.user})})})}),!n&&!r&&Object(k.jsxs)(c.a.Fragment,{children:[Object(k.jsx)("div",{className:"col-lg-6",children:Object(k.jsx)("div",{className:"content-create-pdf h-90",children:Object(k.jsx)(M,{contractData:this.state.addedContract,ref:this.passData,remove:this.removeContract,prev:this.prevPDF,pdfPrev:this.viewPrevPDf,user:this.state.user})})}),Object(k.jsx)("div",{className:"col-lg-6"})]})]}),Object(k.jsxs)("div",{className:"row options-buttons align-items-center justify-content-center",children:[a&&n&&Object(k.jsx)("div",{className:"btn-aprove disabled active col-lg-auto",children:Object(k.jsx)("div",{className:"btn-label absolute-center",children:"Certificado"})}),!a&&n&&Object(k.jsx)("div",{className:"btn-deny disabled active col-lg-auto",children:Object(k.jsx)("div",{className:"btn-label absolute-center",children:"Rechazado"})}),!n&&Object(k.jsxs)(c.a.Fragment,{children:[Object(k.jsx)("div",{className:"btn-aprove col-lg-auto",onClick:function(){e.updateDataState(1)},children:Object(k.jsx)("div",{className:"btn-label absolute-center",children:"Certificar"})}),Object(k.jsx)("div",{className:"col-lg-2"}),Object(k.jsx)("div",{className:"btn-deny col-lg-auto",onClick:function(){e.updateDataState(0)},children:Object(k.jsx)("div",{className:"btn-label absolute-center",children:"Rechazar"})})]})]}),Object(k.jsx)("div",{className:"back-container",children:Object(k.jsx)("div",{className:"btn-back",onClick:this.backToNews,children:Object(k.jsx)("div",{className:"btn-label absolute-center",children:"Volver"})})})]})})}return void 0===this.state.form&&"success"===this.state.status?Object(k.jsx)(c.a.Fragment,{children:Object(k.jsx)("h1",{children:" no hay Formularios con este id"})}):Object(k.jsx)(c.a.Fragment,{children:Object(k.jsx)("h1",{children:" Cargando espera mientras carga"})})}if(void 0!==this.state.form.id&&null!==this.state.form.id){a=null,n=!0,r=1===this.state.form.request_type;return 1===this.state.form.state?a=!0:0===this.state.form.state?a=!1:n=!1,Object(k.jsx)(c.a.Fragment,{children:Object(k.jsxs)("div",{className:a?"item-detail-container":"item-detail-container rejected",children:[Object(k.jsxs)("div",{className:"row external-user container-top no-gutters justify-content-center",children:[Object(k.jsx)("div",{className:"item-detail col-lg-6",children:Object(k.jsxs)("div",{className:"row content-user-data no-gutters",children:[Object(k.jsxs)("div",{className:"col-lg-12 h-100 align-items-center",children:[Object(k.jsx)("div",{className:"row h-10 align-items-center  justify-content-center",children:Object(k.jsx)("div",{className:"title-label-form",children:"Informaci\xf3n del formulario"})}),Object(k.jsxs)("div",{className:"row h-40 align-items-center  justify-content-center",children:[Object(k.jsxs)("div",{className:"item-container col-lg-12",children:[Object(k.jsx)("div",{className:"item-label",children:"Nombre"}),Object(k.jsx)("div",{className:"item-data",children:Object(k.jsx)("div",{className:"input-text absolute-center",children:this.state.form.name})})]}),Object(k.jsxs)("div",{className:"item-container col-lg-12",children:[Object(k.jsx)("div",{className:"item-label",children:"Correo"}),Object(k.jsx)("div",{className:"item-data",children:Object(k.jsx)("div",{className:"input-text absolute-center",children:this.state.form.email})})]}),Object(k.jsxs)("div",{className:"item-container col-lg-12",children:[Object(k.jsx)("div",{className:"item-label",children:"Identificaci\xf3n"}),Object(k.jsx)("div",{className:"item-data",children:Object(k.jsx)("div",{className:"input-text absolute-center",children:this.state.form.identification})})]}),Object(k.jsxs)("div",{className:"item-container col-lg-12",children:[Object(k.jsx)("div",{className:"item-label",children:"Tel\xe9fono"}),Object(k.jsx)("div",{className:"item-data",children:Object(k.jsx)("div",{className:"input-text absolute-center",children:this.state.form.telephone})})]})]}),Object(k.jsxs)("div",{className:"row h-50 align-items-center  justify-content-center",children:[Object(k.jsxs)("div",{className:"item-container area col-lg-12",children:[Object(k.jsx)("div",{className:"item-label",children:"Contenido"}),Object(k.jsx)("div",{className:"item-data",children:Object(k.jsx)("div",{className:"input-text absolute-center",children:this.state.form.content})})]}),Object(k.jsxs)("div",{className:"item-container col-lg-12",children:[Object(k.jsx)("div",{className:"item-label",children:"PDF"}),Object(k.jsx)("div",{className:"btn-pdf",onClick:function(){return e.setState({showPdf:!0})},children:Object(k.jsx)("div",{className:"btn-label absolute-center",children:"Ver estampilla"})})]})]})]}),Object(k.jsxs)(I.a,{show:this.state.showPdf,onShow:this.getPdf,onHide:function(){return e.setState({showPdf:!1})},children:[Object(k.jsx)(I.a.Header,{closeButton:!0,children:Object(k.jsx)(I.a.Title,{children:"Estampilla"})}),Object(k.jsx)(I.a.Body,{children:Object(k.jsx)("div",{className:"pdf-viewer",children:Object(k.jsx)("iframe",{name:"theFrame"})})})]}),Object(k.jsxs)(I.a,{show:this.state.previewPDF,onShow:this.prevPDF,onHide:function(){return e.setState({previewPDF:!1})},children:[Object(k.jsx)(I.a.Header,{closeButton:!0,children:Object(k.jsx)(I.a.Title,{children:"Visualizador del PDF"})}),Object(k.jsx)(I.a.Body,{children:Object(k.jsx)("div",{className:"pdf-viewer",children:Object(k.jsx)("div",{id:"viewer"})})})]}),Object(k.jsxs)(I.a,{show:this.state.blobPDF,onShow:this.viewPrevPDf,onHide:function(){return e.setState({blobPDF:!1})},children:[Object(k.jsx)(I.a.Header,{closeButton:!0,children:Object(k.jsx)(I.a.Title,{children:"Visualizador del PDF"})}),Object(k.jsx)(I.a.Body,{children:Object(k.jsx)("div",{className:"pdf-viewer",children:Object(k.jsx)("iframe",{name:"v-pdf"})})})]})]})}),Object(k.jsx)("div",{className:"user-data-container col-lg-6",children:r?Object(k.jsx)(c.a.Fragment,{children:Object(k.jsx)("div",{className:"content-payroll-data",children:Object(k.jsx)(W,{payrollId:this.state.form.identification,ref:this.userData})})}):Object(k.jsx)(c.a.Fragment,{children:Object(k.jsx)("div",{className:"content-contractor-data",children:Object(k.jsx)(U,{contractorId:this.state.form.identification,pdfData:this.addContract,addedContract:this.state.addedContract,ref:this.contractorRef,user:this.state.user})})})})]}),Object(k.jsx)("div",{className:"row container-bottom no-gutters justify-content-center"}),this.state.form.checked?s(this.state.form.state):t(),Object(k.jsxs)("div",{className:"row options-buttons align-items-center justify-content-center",children:[a&&n&&Object(k.jsx)("div",{className:"btn-aprove disabled active col-lg-auto",children:Object(k.jsx)("div",{className:"btn-label absolute-center",children:"Certificado"})}),!a&&n&&Object(k.jsx)("div",{className:"btn-deny disabled active col-lg-auto",children:Object(k.jsx)("div",{className:"btn-label absolute-center",children:"Rechazado"})}),!n&&Object(k.jsx)("div",{className:"btn-aprove disabled active col-lg-auto",children:Object(k.jsx)("div",{className:"btn-label absolute-center",children:"En revision"})})]})]})})}return void 0===this.state.form&&"success"===this.state.status?Object(k.jsx)(c.a.Fragment,{children:Object(k.jsx)("h1",{children:" no hay Formularios con este id"})}):Object(k.jsx)(c.a.Fragment,{children:Object(k.jsx)("h1",{children:" Cargando espera mientras carga"})})}}]),s}(a.Component),G=(s(789),function(e){Object(o.a)(s,e);var t=Object(d.a)(s);function s(e){var a;return Object(r.a)(this,s),(a=t.call(this,e)).connectSocket=function(){a.socket=Object(p.io)(a.ws)},a.setSocket=function(e){},a.redirect=function(e){1===e?a.props.history.push("/login"):a.props.history.push("/form")},a.url=x.url,a.ws=x.ws,a.socket=null,a.state={user:{name:"",email:"",identification:"",telephone:""},stamp:null,status:null},a}return Object(l.a)(s,[{key:"componentWillMount",value:function(){this.connectSocket()}},{key:"render",value:function(){var e=this;return Object(k.jsx)(c.a.Fragment,{children:Object(k.jsx)("div",{className:"container-home row h-100 align-items-center justify-content-center",children:Object(k.jsxs)("div",{className:"content-container-home",children:[Object(k.jsx)("div",{className:"row h-25 no-gutters align-items-center justify-content-center",children:Object(k.jsx)("div",{className:"form-logo",children:Object(k.jsx)("img",{className:"login-logo",src:O,alt:"imagen de metrolinea"})})}),Object(k.jsx)("div",{className:"row h-15 no-gutters align-items-center justify-content-center",children:Object(k.jsx)("div",{className:"col-lg-12 align-items-center justify-content-center",children:Object(k.jsx)("div",{className:"home-title-color absolute-center",children:"Bienvenido al asistente"})})}),Object(k.jsx)("div",{className:"row h-15 no-gutters align-items-center justify-content-center",children:Object(k.jsx)("div",{className:"col-lg-12 align-items-center justify-content-center",children:Object(k.jsx)("div",{className:"home-description absolute-center",children:"Accede para solicitar carta laboral o inicia sesi\xf3n para comenzar la administracion de cartas laborales."})})}),Object(k.jsx)("div",{className:"row h-20 no-gutters align-items-center justify-content-center",children:Object(k.jsx)("div",{className:"content admin",children:Object(k.jsx)("div",{className:"btn-login",onClick:function(){e.redirect(1)},children:Object(k.jsx)("div",{className:"btn-label absolute-center",children:"Inicia sesi\xf3n"})})})}),Object(k.jsx)("div",{className:"row h-20 no-gutters align-items-center justify-content-center",children:Object(k.jsx)("div",{className:"content external",children:Object(k.jsx)("div",{className:"btn-carta",onClick:function(){e.redirect(0)},children:Object(k.jsx)("div",{className:"btn-label absolute-center",children:"Solicitar una carta laboral"})})})})]})})})}}]),s}(a.Component)),Q=(s(790),function(e){Object(o.a)(s,e);var t=Object(d.a)(s);function s(e){var a;return Object(r.a)(this,s),(a=t.call(this,e)).userNameRef=c.a.createRef(),a.userPassRef=c.a.createRef(),a.connectSocket=function(){a.socket=Object(p.io)(a.ws)},a.setSocket=function(e){a.socket.emit("set-unchecked-news",e.data.data),a.socket.on("get-unchecked-news",(function(e){a.setState({forms:e,status:"success"})}))},a.isLogged=function(){},a.login=function(){v.a.get(a.url+"get-unchecked-forms").then((function(e){a.setSocket(e)}))},a.saveForm=function(){var e=Object(h.a)(m.a.mark((function e(t){var s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),s={name:a.userNameRef.current.value,pass:a.userPassRef.current.value},a.setState({user:s}),e.next=5,v.a.post(a.url+"login",s).then((function(e){e?y.a.fire({title:'<div class="big-square"></div><div class="little-square"></div><div class="bg-title-pop"><div class="list-label pop absolute-center"><p>Bienvenido</p></div></div>',confirmButtonText:"Seguir",allowOutsideClick:!1,showCloseButton:!0}).then((function(){localStorage.setItem("userSesion",e.data.token),a.props.history.push("/news")})):(y.a.fire({title:'<div class="big-square"></div><div class="little-square"></div><div class="bg-title-pop"><div class="list-label pop absolute-center"><p>Usuario o contrase\xf1a incorrectos</p></div></div>',confirmButtonText:"Seguir",allowOutsideClick:!1,showCloseButton:!0}),a.setState({status:"failed"}))}),(function(e){y.a.fire({title:'<div class="big-square"></div><div class="little-square"></div><div class="bg-title-pop"><div class="list-label pop absolute-center"><p>Usuario o contrase\xf1a incorrectos</p></div></div>',confirmButtonText:"Seguir",allowOutsideClick:!1,showCloseButton:!0})}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.url=x.url,a.ws=x.ws,a.socket=null,a.state={user:{name:"",pass:""},status:null},a}return Object(l.a)(s,[{key:"componentWillMount",value:function(){this.connectSocket()}},{key:"render",value:function(){return Object(k.jsx)(c.a.Fragment,{children:Object(k.jsx)("div",{className:"row h-100 content-login no-gutters justify-content-center align-items-center",children:Object(k.jsx)("div",{className:"form-content-container row justify-content-center align-items-center",children:Object(k.jsxs)("form",{className:"form",onSubmit:this.saveForm,children:[Object(k.jsx)("div",{className:"form-group row h-30 justify-content-center align-items-center",children:Object(k.jsx)("div",{className:"form-logo",children:Object(k.jsx)("img",{className:"login-logo",src:O,alt:"imagen de metrolinea"})})}),Object(k.jsxs)("div",{className:"form-group  row h-20 justify-content-center align-items-center",children:[Object(k.jsx)("div",{className:"form-label col-lg-12",htmlFor:"nombre",children:Object(k.jsx)("div",{className:"text absolute-center",children:"Nombre de usuario"})}),Object(k.jsx)("input",{className:"form-input col-lg-12",type:"text",name:"nombre",ref:this.userNameRef,required:!0})]}),Object(k.jsxs)("div",{className:"form-group  row h-20 justify-content-center align-items-center",children:[Object(k.jsx)("div",{className:"form-label col-lg-12",htmlFor:"pass",children:Object(k.jsx)("div",{className:"text absolute-center",children:"Contrase\xf1a"})}),Object(k.jsx)("input",{className:"form-input col-lg-12",type:"password",name:"pass",ref:this.userPassRef,required:!0})]}),Object(k.jsx)("div",{className:"row h-30 justify-content-center align-items-center",children:Object(k.jsx)("input",{type:"submit",value:"Entrar"})})]})})})})}}]),s}(a.Component)),X=function(e){Object(o.a)(s,e);var t=Object(d.a)(s);function s(){return Object(r.a)(this,s),t.apply(this,arguments)}return Object(l.a)(s,[{key:"render",value:function(){return Object(k.jsx)(u.a,{children:Object(k.jsxs)(j.c,{children:[Object(k.jsx)(j.a,{exact:!0,path:"/",component:G}),Object(k.jsx)(j.a,{exact:!0,path:"/form",component:C}),Object(k.jsx)(j.a,{exact:!0,path:"/login",component:Q}),Object(k.jsx)(j.a,{exact:!0,path:"/news",component:B}),Object(k.jsx)(j.a,{path:"/new-details/:id",component:$}),Object(k.jsx)(j.a,{render:function(){return Object(k.jsxs)(c.a.Fragment,{children:[Object(k.jsx)("h1",{children:"Pagina no encontrada"}),Object(k.jsx)(u.b,{to:"/",children:"Inicio"})]})}})]})})}}]),s}(a.Component);s(794);var Z=function(){return Object(k.jsx)("div",{className:"App",children:Object(k.jsx)("section",{className:"components",children:Object(k.jsx)(X,{})})})},K=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,816)).then((function(t){var s=t.getCLS,a=t.getFID,c=t.getFCP,n=t.getLCP,i=t.getTTFB;s(e),a(e),c(e),n(e),i(e)}))};i.a.render(Object(k.jsxs)(c.a.StrictMode,{children:[Object(k.jsx)(Z,{}),Object(k.jsx)("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"}),Object(k.jsx)("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/icon?family=Material+Icons"})]}),document.getElementById("root")),K()}},[[795,1,2]]]);
//# sourceMappingURL=main.2be32786.chunk.js.map